System.register("chunks:///_virtual/AnimationManager.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(n){"use strict";var o,t,a,e,i,l;return{setters:[function(n){o=n.inheritsLoose,t=n.createForOfIteratorHelperLoose},function(n){a=n.cclegacy,e=n._decorator,i=n.Animation,l=n.Component}],execute:function(){var r;a._RF.push({},"f02aboIMFJFAqAW5RgCucM8","AnimationManager",void 0);var p=e.ccclass;e.property,n("AnimationManager",p("AnimationManager")(r=function(n){function a(){for(var o,t=arguments.length,a=new Array(t),e=0;e<t;e++)a[e]=arguments[e];return(o=n.call.apply(n,[this].concat(a))||this).animationComponent=null,o}o(a,n);var e=a.prototype;return e.start=function(){var n=this.node.getChildByName("Sprite");this.animationComponent=n.getComponent(i);var o=this.animationComponent.clips,a=o[0];o[1],o[2],o[3],o[4],this.animationComponent.getState(a.name);console.log(a.tracks);for(var e,l=t(a.tracks);!(e=l()).done;){var r=e.value;console.log(r.path),console.log(r.proxy),console.log(r.range()),console.log(r.channels())}},e.playIdle=function(){this.animationComponent.play("Idle")},e.playWalkDown=function(){this.animationComponent.play("WalkDown")},e.playWalkUp=function(){this.animationComponent.play("WalkUp")},e.playWalkLeft=function(){this.animationComponent.play("WalkLeft")},e.playWalkRight=function(){this.animationComponent.play("WalkRight")},a}(l))||r);a._RF.pop()}}}));

System.register("chunks:///_virtual/Enemy.ts",["./rollupPluginModLoBabelHelpers.js","cc","./AnimationManager.ts","./PathFinding.ts"],(function(i){"use strict";var t,n,o,e,s,a,r,h,g,_;return{setters:[function(i){t=i.applyDecoratedDescriptor,n=i.inheritsLoose,o=i.initializerDefineProperty,e=i.assertThisInitialized},function(i){s=i.cclegacy,a=i._decorator,r=i.tween,h=i.Component},function(i){g=i.AnimationManager},function(i){_=i.PathFinding}],execute:function(){var l,v,p;s._RF.push({},"dc1f93oQHpPJ7r/HcrJFh/G","Enemy",void 0);var c=a.ccclass,M=a.property;i("Enemy",c("Enemy")((p=t((v=function(i){function t(){for(var t,n=arguments.length,s=new Array(n),a=0;a<n;a++)s[a]=arguments[a];return(t=i.call.apply(i,[this].concat(s))||this)._animationManager=void 0,t._pathFinding=void 0,t._isMovingUp=!1,t._isMovingDown=!1,t._isMovingLeft=!1,t._isMovingRight=!1,t._tween=null,o(t,"moveDuration",p,e(t)),t}n(t,i);var s=t.prototype;return s.start=function(){this._animationManager=this.node.getComponent(g),this._pathFinding=this.node.getComponent(_)},s.followTarget=function(i,t){this._pathFinding.setTiledLayerWalkableNode(i),this._pathFinding.setTarget(t),this._pathFinding.init(),this._startMove()},s._startMove=function(){var i=this,t=this._pathFinding.getNextPosition();null!==t&&(this._tween=r(this.node).to(this.moveDuration,{position:t},{onStart:function(){i._setDirection(i.node.getPosition(),t),i._animate()},onComplete:function(){i._startMove(),i._animate()}}).start())},s._setDirection=function(i,t){var n=t.x,o=t.y,e=i.x,s=i.y;n>e?(this._isMovingRight=!0,this._isMovingLeft=!1):n<e?(this._isMovingLeft=!0,this._isMovingRight=!1):(this._isMovingLeft=!1,this._isMovingRight=!1),o>s?(this._isMovingUp=!0,this._isMovingDown=!1):o<s?(this._isMovingUp=!1,this._isMovingDown=!0):(this._isMovingUp=!1,this._isMovingDown=!1)},s._animate=function(){void 0!==this._animationManager&&(this._isMovingLeft?this._animationManager.playWalkLeft():this._isMovingRight?this._animationManager.playWalkRight():this._isMovingUp?this._animationManager.playWalkUp():this._isMovingDown?this._animationManager.playWalkDown():this._animationManager.playIdle())},s.goToIdle=function(){this._isMovingUp=!1,this._isMovingDown=!1,this._isMovingLeft=!1,this._isMovingRight=!1,this._animate()},s.stopMove=function(){null!==this._tween&&(this._tween.stop(),this.goToIdle())},s.startMove=function(){null!==this._tween&&this._tween.start()},t}(h)).prototype,"moveDuration",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.5}}),l=v))||l);s._RF.pop()}}}));

System.register("chunks:///_virtual/EnemyManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Enemy.ts"],(function(e){"use strict";var t,n,i,r,a,o,l,s,u,c,p,h,y,b,d,f;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.inheritsLoose,i=e.initializerDefineProperty,r=e.assertThisInitialized},function(e){a=e.cclegacy,o=e._decorator,l=e.Color,s=e.Node,u=e.Prefab,c=e.TiledObjectGroup,p=e.UITransform,h=e.instantiate,y=e.Vec3,b=e.Graphics,d=e.Component},function(e){f=e.Enemy}],execute:function(){var m,g,w,P,v,T,E,G,L,S,j,C;a._RF.push({},"8124cgVbJhMK7T89lvqeIWK","EnemyManager",void 0);var O=o.ccclass,z=o.property,D=new l(0,255,255,255);e("EnemyManager",(m=O("EnemyManager"),g=z({type:s}),w=z({type:s}),P=z({type:s}),v=z({type:u}),m((G=t((E=function(e){function t(){for(var t,n=arguments.length,a=new Array(n),o=0;o<n;o++)a[o]=arguments[o];return t=e.call.apply(e,[this].concat(a))||this,i(t,"spawnPointObjectLayer",G,r(t)),i(t,"walkableTiledLayer",L,r(t)),i(t,"target",S,r(t)),t.tiledObjectGroup=null,t.enememySpawnPoints=[],t.uitransform=null,t.debugGraphic=null,i(t,"enemyPrefab",j,r(t)),i(t,"debug",C,r(t)),t}n(t,e);var a=t.prototype;return a.start=function(){var e=this;this.tiledObjectGroup=this.spawnPointObjectLayer.getComponent(c),this.uitransform=this.node.getComponent(p),this.tiledObjectGroup.getObjects().forEach((function(t){var n=t,i=e.spawnPointToWorldPosition(n);e.enememySpawnPoints.push(i)})),this.debug&&(this.createDebugLayer(),this.creteSpawnPointDebug()),this.schedule(this.spawnEnemy,3)},a.spawnEnemy=function(){var e=this,t=h(this.enemyPrefab),n=t.getComponent(f),i=this.enememySpawnPoints.at(Math.random()*this.enememySpawnPoints.length);t.setPosition(i),this.node.parent.addChild(t),setTimeout((function(t){n.followTarget(e.walkableTiledLayer,e.target)}),0)},a.spawnPointToWorldPosition=function(e){var t=e.width,n=e.height,i=new y(e.x+t/2,e.y-n/2,0);return this.uitransform.convertToNodeSpaceAR(i)},a.createDebugLayer=function(){var e=this.node.parent,t=new s;e.addChild(t);var n=this.node.parent.getWorldPosition(),i=this.uitransform.convertToNodeSpaceAR(n);t.setPosition(i),t.layer=e.layer,this.debugGraphic=t.addComponent(b)},a.creteSpawnPointDebug=function(){var e=this;this.enememySpawnPoints.forEach((function(t){e.debugGraphic.fillColor=D,e.debugGraphic.rect(t.x-8,t.y-8,16,16),e.debugGraphic.fill()}))},t}(d)).prototype,"spawnPointObjectLayer",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),L=t(E.prototype,"walkableTiledLayer",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),S=t(E.prototype,"target",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),j=t(E.prototype,"enemyPrefab",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),C=t(E.prototype,"debug",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),T=E))||T));a._RF.pop()}}}));

System.register("chunks:///_virtual/main",["./AnimationManager.ts","./Enemy.ts","./EnemyManager.ts","./PathFinding.ts","./Player.ts","./PlayerInput.ts","./Tilemap.ts"],(function(){"use strict";return{setters:[null,null,null,null,null,null,null],execute:function(){}}}));

System.register("chunks:///_virtual/PathFinding.ts",["./rollupPluginModLoBabelHelpers.js","cc","./index.mjs_cjs=&original=.js","./index.js"],(function(t){"use strict";var i,e,r,o,a,n,l,h,d,s,c,u,_,g,f;return{setters:[function(t){i=t.applyDecoratedDescriptor,e=t.inheritsLoose,r=t.initializerDefineProperty,o=t.assertThisInitialized,a=t.createForOfIteratorHelperLoose},function(t){n=t.cclegacy,l=t._decorator,h=t.Color,d=t.TiledLayer,s=t.UITransform,c=t.Vec3,u=t.Node,_=t.Graphics,g=t.Component},null,function(t){f=t.default}],execute:function(){var p,y,x;n._RF.push({},"df136KkGQlEGIVreQYSv1ad","PathFinding",void 0);var b=l.ccclass,v=l.property,L=new h(255,0,0,128),B=new h(0,255,0,128),m=new h(0,0,255,128);t("PathFinding",b("PathFinding")((x=i((y=function(t){function i(){for(var i,e=arguments.length,a=new Array(e),n=0;n<e;n++)a[n]=arguments[n];return i=t.call.apply(t,[this].concat(a))||this,r(i,"debug",x,o(i)),i._target=null,i._tiledLayerWalkableNode=null,i._tiledLayer=null,i.debugGraphic=null,i._tiledLayerBoundingBox=void 0,i._matrix=[],i._matrixWidth=0,i._matrixHeight=0,i._tileWidth=0,i._tileHeight=0,i._path=[],i._grid=void 0,i.finder=new f.AStarFinder({allowDiagonal:!0,dontCrossCorners:!0}),i}e(i,t);var n=i.prototype;return n.init=function(){this._tiledLayer=this._tiledLayerWalkableNode.getComponent(d),this._getLayerSize(),this._getTileSize(),this._getTileLayerSize(),this._createMatrix(),this._populateMatrixFromVerticesData(),this._createGrid(),this.debug&&this._createDebugLayer()},n.setDebug=function(t){this.debug=t},n.setTarget=function(t){this._target=t},n.setTiledLayerWalkableNode=function(t){this._tiledLayerWalkableNode=t},n.getNextPosition=function(){this._createPath(),this.debug&&(this.debugGraphic.clear(),this._createMatrixDebug(),this._createPathDebug());var t=this._path[1];if(t){var i=t[0],e=t[1];return this._convertMatrixPositionToPosition([i,e],!0)}return console.log("no path"),null},n._getLayerSize=function(){var t=this._tiledLayerWalkableNode.getComponent(s);this._tiledLayerBoundingBox=t.getBoundingBox()},n._getTileLayerSize=function(){var t=this._tiledLayer.getLayerSize(),i=t.width,e=t.height;this._matrixWidth=i,this._matrixHeight=e},n._getTileSize=function(){var t=this._tiledLayer.getMapTileSize().width;this._tileWidth=t,this._tileHeight=t},n._createMatrix=function(){var t=this;this._matrix=Array(this._matrixHeight).fill(1).map((function(){return Array(t._matrixWidth).fill(1)}))},n._populateMatrixFromVerticesData=function(){for(var t=this._tiledLayer.vertices,i=0;i<t.length;i++)if(void 0!==t[i])for(var e,r=Object.keys(t[i]).map((function(t){return parseInt(t)})).filter((function(t){return!Number.isNaN(t)})),o=a(r);!(e=o()).done;){var n=e.value;this._matrix[i][n]=0}},n._createGrid=function(){this._grid=new f.Grid(this._matrix)},n._convertPositionToMatrixPosition=function(t){return[Math.floor((t.x+Math.abs(this._tiledLayerBoundingBox.x))/this._tileWidth),Math.floor((t.y+Math.abs(this._tiledLayerBoundingBox.y))/this._tileHeight)]},n._convertMatrixPositionToPosition=function(t,i){var e=t[0],r=t[1];void 0===i&&(i=!1);var o=i?this._tileWidth/2:0,a=i?this._tileHeight/2:0;return new c(e*this._tileWidth+this._tiledLayerBoundingBox.x+o,r*this._tileHeight+this._tiledLayerBoundingBox.y+a,0)},n._createDebugLayer=function(){var t=this.node.parent,i=t.getComponent(s),e=new u;t.addChild(e);var r=this._tiledLayerWalkableNode.getWorldPosition(),o=i.convertToNodeSpaceAR(r);e.setPosition(o),e.layer=t.layer,this.debugGraphic=e.addComponent(_)},n._createMatrixDebug=function(){var t=this;this._matrix.forEach((function(i,e){i.forEach((function(i,r){1===i&&(t.debugGraphic.fillColor=L,t.debugGraphic.rect(r*t._tileWidth+t._tiledLayerBoundingBox.x,e*t._tileHeight+t._tiledLayerBoundingBox.y,t._tileWidth,t._tileHeight),t.debugGraphic.fill()),0===i&&(t.debugGraphic.fillColor=B,t.debugGraphic.rect(r*t._tileWidth+t._tiledLayerBoundingBox.x,e*t._tileHeight+t._tiledLayerBoundingBox.y,t._tileWidth,t._tileHeight),t.debugGraphic.fill())}))}))},n._createPath=function(){var t=this._target.getWorldPosition(),i=this.node.getWorldPosition(),e=this._tiledLayerWalkableNode.getComponent(s),r=e.convertToNodeSpaceAR(t),o=e.convertToNodeSpaceAR(i),a=this._convertPositionToMatrixPosition(r),n=a[0],l=a[1],h=this._convertPositionToMatrixPosition(o),d=h[0],c=h[1],u=new f.AStarFinder,_=this._grid.clone();if(this._path=u.findPath(d,c,n,l,this._grid),0===this._path.length)throw new Error("no path, probably target ouf of bounds or in blocked tile");this._grid=_},n._createPathDebug=function(){var t=this;this._path.forEach((function(i){var e=i[0],r=i[1];t.debugGraphic.fillColor=m,t.debugGraphic.rect(e*t._tileWidth+t._tiledLayerBoundingBox.x,r*t._tileHeight+t._tiledLayerBoundingBox.y,t._tileWidth,t._tileHeight),t.debugGraphic.fill()}))},i}(g)).prototype,"debug",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),p=y))||p);n._RF.pop()}}}));

System.register("chunks:///_virtual/Player.ts",["./rollupPluginModLoBabelHelpers.js","cc","./AnimationManager.ts"],(function(i){"use strict";var t,n,e,o,a,s,r,l,c,h;return{setters:[function(i){t=i.applyDecoratedDescriptor,n=i.inheritsLoose,e=i.initializerDefineProperty,o=i.assertThisInitialized},function(i){a=i.cclegacy,s=i._decorator,r=i.Vec2,l=i.RigidBody2D,c=i.Component},function(i){h=i.AnimationManager}],execute:function(){var g,y,v;a._RF.push({},"2ef9cKCTOBLbIPZXAV3IYhZ","Player",void 0);var p=s.ccclass,u=s.property;i("Player",p("Player")((v=t((y=function(i){function t(){for(var t,n=arguments.length,a=new Array(n),s=0;s<n;s++)a[s]=arguments[s];return t=i.call.apply(i,[this].concat(a))||this,e(t,"moveSpeed",v,o(t)),t.rigidBody=void 0,t.velocity=new r(0,0),t.AnimationManager=void 0,t.isMovingUp=!1,t.isMovingDown=!1,t.isMovingLeft=!1,t.isMovingRight=!1,t.isFiring=!1,t}n(t,i);var a=t.prototype;return a.start=function(){this.rigidBody=this.node.getComponent(l),this.AnimationManager=this.node.getComponent(h)},a.lateUpdate=function(i){this.move(i)},a.move=function(i){this.isMovingLeft?this.velocity.x=-1:this.isMovingRight?this.velocity.x=1:this.velocity.x=0,this.isMovingUp?this.velocity.y=1:this.isMovingDown?this.velocity.y=-1:this.velocity.y=0,this.rigidBody.linearVelocity=new r(this.velocity.x*i*this.moveSpeed,this.velocity.y*i*this.moveSpeed)},a.animate=function(){this.isMovingLeft?this.AnimationManager.playWalkLeft():this.isMovingRight?this.AnimationManager.playWalkRight():this.isMovingUp?this.AnimationManager.playWalkUp():this.isMovingDown?this.AnimationManager.playWalkDown():this.AnimationManager.playIdle()},a.gamepadMoving=function(i){this.rigidBody.linearVelocity=i},a.onFire=function(i){},t}(c)).prototype,"moveSpeed",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 10}}),g=y))||g);a._RF.pop()}}}));

System.register("chunks:///_virtual/PlayerInput.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Player.ts"],(function(e){"use strict";var i,t,a,n,r,s,o,p,c,l,y,h;return{setters:[function(e){i=e.applyDecoratedDescriptor,t=e.inheritsLoose,a=e.initializerDefineProperty,n=e.assertThisInitialized},function(e){r=e.cclegacy,s=e._decorator,o=e.input,p=e.Input,c=e.KeyCode,l=e.v2,y=e.Component},function(e){h=e.Player}],execute:function(){var u,g,d;r._RF.push({},"e0fbdb4ia5Ibp7c562r7mro","PlayerInput",void 0);var v=s.ccclass,R=s.property;e("PlayerInput",v("PlayerInput")((d=i((g=function(e){function i(){for(var i,t=arguments.length,r=new Array(t),s=0;s<t;s++)r[s]=arguments[s];return i=e.call.apply(e,[this].concat(r))||this,a(i,"gamepadDeadZone",d,n(i)),i.player=void 0,i}t(i,e);var r=i.prototype;return r.onLoad=function(){o.on(p.EventType.KEY_DOWN,this.onKeyDown,this),o.on(p.EventType.KEY_UP,this.onKeyUp,this),o.on(p.EventType.GAMEPAD_INPUT,this.gamepadInput,this)},r.start=function(){this.player=this.node.getComponent(h)},r.onKeyDown=function(e){switch(e.keyCode){case c.ARROW_LEFT:this.player.isMovingLeft=!0;break;case c.ARROW_RIGHT:this.player.isMovingRight=!0;break;case c.ARROW_UP:this.player.isMovingUp=!0;break;case c.ARROW_DOWN:this.player.isMovingDown=!0;break;case c.SPACE:this.player.isFiring=!0}this.player.animate()},r.onKeyUp=function(e){switch(e.keyCode){case c.ARROW_LEFT:this.player.isMovingLeft=!1;break;case c.ARROW_RIGHT:this.player.isMovingRight=!1;break;case c.ARROW_UP:this.player.isMovingUp=!1;break;case c.ARROW_DOWN:this.player.isMovingDown=!1;break;case c.SPACE:this.player.isFiring=!1}this.player.animate()},r.gamepadInput=function(e){var i=e.gamepad,t=i.buttonSouth.getValue(),a=i.leftStick.getValue(),n=a.x,r=a.y;if(1===t&&(this.player.isFiring=!0),0===t&&(this.player.isFiring=!1),0!==n||0!==r){var s=n>this.gamepadDeadZone||n<-this.gamepadDeadZone?n:0,o=r>this.gamepadDeadZone||r<-this.gamepadDeadZone?r:0;this.player.gamepadMoving(l(s,o))}},i}(y)).prototype,"gamepadDeadZone",[R],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.2}}),u=g))||u);r._RF.pop()}}}));

System.register("chunks:///_virtual/Tilemap.ts",["./rollupPluginModLoBabelHelpers.js","cc","./hull.mjs_cjs=&original=.js","./index.mjs_cjs=&original=2.js","./index2.js","./hull.js"],(function(e){"use strict";var t,r,i,n,o,a,l,s,u,c,p,f,h,d,g,b;return{setters:[function(e){t=e.applyDecoratedDescriptor,r=e.inheritsLoose,i=e.initializerDefineProperty,n=e.assertThisInitialized,o=e.createForOfIteratorHelperLoose},function(e){a=e.cclegacy,l=e._decorator,s=e.RigidBody2D,u=e.PhysicsSystem2D,c=e.EPhysics2DDrawFlags,p=e.TiledLayer,f=e.PolygonCollider2D,h=e.Vec2,d=e.Component},null,null,function(e){g=e.default},function(e){b=e.default}],execute:function(){var v,y,m,D,w,C;a._RF.push({},"fb4bdNOk2dGxJ+B8uDYMVlv","Tilemap",void 0);var j=l.ccclass,P=l.property,T=l.requireComponent;e("Tilemap",j("Tilemap")(v=T(s)((m=t((y=function(e){function t(){for(var t,r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return t=e.call.apply(e,[this].concat(o))||this,i(t,"debug",m,n(t)),i(t,"hullConcavity",D,n(t)),i(t,"neighborhoodRadius",w,n(t)),i(t,"clusterNeighborsPoints",C,n(t)),t}r(t,e);var a=t.prototype;return a.onLoad=function(){this.debug&&(u.instance.debugDrawFlags=c.Aabb|c.Pair|c.CenterOfMass|c.Joint|c.Shape)},a.start=function(){var e=this.node.getComponent(p),t=e.leftDownToCenterX,r=e.leftDownToCenterY,i=e.getMapTileSize(),n=i.width,a=i.height,l=e.vertices,s=[];this.debug&&console.log("vertices",l);for(var u,c=o(l);!(u=c()).done;){var d=u.value;if(void 0!==d)for(var v=0,y=Object.entries(d);v<y.length;v++){var m=y[v],D=(m[0],m[1]);if("object"==typeof D)for(var w=D.left,C=D.bottom,j=0,P=[[w,C],[w+n,C],[w+n,C+a],[w,C+a]];j<P.length;j++){var T=P[j];s.push([T[0]-t,T[1]-r])}}}var z=(new g.DBSCAN).run(s,this.neighborhoodRadius,this.clusterNeighborsPoints);this.debug&&console.log("clusters",z);for(var R,_=z.map((function(e){return e.map((function(e){return s[e]}))})),F=o(_);!(R=F()).done;){var L=R.value,N=b(L,this.hullConcavity),S=this.node.addComponent(f);S.points=N.map((function(e){var t=e[0],r=e[1];return new h(t,r)})),S.apply()}},t}(d)).prototype,"debug",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),D=t(y.prototype,"hullConcavity",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),w=t(y.prototype,"neighborhoodRadius",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 50}}),C=t(y.prototype,"clusterNeighborsPoints",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 10}}),v=y))||v)||v);a._RF.pop()}}}));

(function(r) {
  r('virtual:///prerequisite-imports/main', 'chunks:///_virtual/main'); 
})(function(mid, cid) {
    System.register(mid, [cid], function (_export, _context) {
    return {
        setters: [function(_m) {
            var _exportObj = {};

            for (var _key in _m) {
              if (_key !== "default" && _key !== "__esModule") _exportObj[_key] = _m[_key];
            }
      
            _export(_exportObj);
        }],
        execute: function () { }
    };
    });
});